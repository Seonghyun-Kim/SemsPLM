@{
    Layout = null;
}

<div style="width:100%;text-align:right;padding-right:10px;position:relative;">
    <button id="dlgCreateIssue" onclick="" class="custom-button"><i class="fas fa-save"></i> 등록</button>
    <button id="dlgCloseBtn" onclick="" class="custom-button"><i class="fas fa-window-close"></i> 취소</button>
</div>

<div>
    <table class="createtable">
        <colgroup>
            <col style="width:18%" />
            <col style="width:32%" />
            <col style="width:18%" />
            <col style="width:32%" />
        </colgroup>
        <tr>
            <th><i class="fa fa-caret-right"></i> 이슈명</th>
            <td colspan="3">
                <input type="text" id="dlgIssueNm" />
            </td>
        </tr>
        <tr>
            <th><i class="fa fa-caret-right"></i> 프로젝트명</th>
            <td colspan="3">
                <input type="text" id="dlgProjNm" value="@ViewBag.Detail.ProjectNm" readonly />
            </td>
        </tr>
        <tr class="TaskVal">
            <th><i class="fa fa-caret-right"></i> 타스크명</th>
            <td colspan="3">
                <input type="text" id="dlgTaskNm" readonly />
            </td>
        </tr>
        <tr>
            <th><i class="fa fa-caret-right"></i> 중요도</th>
            <td>
                <div id="importance_Good" class="issueRadioBtn">상</div>
                <div id="importance_Aver" class="issueRadioBtn">중</div>
                <div id="importance_Poor" class="issueRadioBtn">하</div>
            </td>
            <th><i class="fa fa-caret-right"></i> 상태</th>
            <td>
                <input type="text" value="등록" id="dlgStatus" readonly />
            </td>
        </tr>
        <tr>
            <th><i class="fa fa-caret-right"></i> 등록일</th>
            <td>
                <input type="text" value="@Convert.ToString(DateTime.Now.ToString("yyyy-MM-dd"))" readonly />
            </td>
            <th><i class="fa fa-caret-right"></i> 예상처리일</th>
            <td>
                <div id="issueEstimatedFinDate"></div>
            </td>
        </tr>
        <tr class="">
            <th><i class="fa fa-caret-right"></i> 처리자</th>
            <td>
                <input type="hidden" id="dlgMangerOID" />
                <input type="text" id="dlgManager" value="" style="width:150px;" readonly />
                <button class="custom-button" id="dlgSelManager"><i class="fas fa-search"></i> 검색</button>
            </td>
            <th><i class="fa fa-caret-right"></i> 필수 결재 여부</th>
            <td>
                <div id="IsApprovalRequired" name="IsApprovalRequired" data-value="@Common.Constant.PmsConstant.ATTRIBUTE_ISSUE_ETC" class="issueCheckBox"></div>
            </td>
        </tr>
        <tr>
            <th><i class="fa fa-caret-right"></i> 구분</th>
            <td colspan="3">
                <div id="issueType_spec" name="IssueType" data-value="@Common.Constant.PmsConstant.ATTRIBUTE_ISSUE_SPEC" class="issueCheckBox">사양</div>
                <div id="issueType_4m" name="IssueType" data-value="@Common.Constant.PmsConstant.ATTRIBUTE_ISSUE_4M" class="issueCheckBox">4M</div>
                <div id="issueType_quality" name="IssueType" data-value="@Common.Constant.PmsConstant.ATTRIBUTE_ISSUE_QUALITY" class="issueCheckBox">품질</div>
                <div id="issueType_etc" name="IssueType" data-value="@Common.Constant.PmsConstant.ATTRIBUTE_ISSUE_ETC" class="issueCheckBox">기타</div>
            </td>
        </tr>
        <tr>
            <th style="vertical-align:top;"><i class="fa fa-caret-right"></i> 이슈내용</th>
            <td colspan="3">
                <div id="dlgDescription"></div>
            </td>

        </tr>
    </table>
</div>

<script>
    var ApprovRequired = "@Common.Constant.CommonConstant.ACTION_NO";
    $(function () {
        $('#dlgDescription').jqxEditor({
            width: '100%',
            height: 200,
        });
        $('.issueRadioBtn').jqxRadioButton({ width: 100, height: 32 });
        $('#importance_Poor').jqxRadioButton({ checked: true});


        $('#issueEstimatedFinDate').jqxDateTimeInput({ width: 340, height: 32, formatString: 'yyyy-MM-dd', });

        $('.issueCheckBox').jqxCheckBox({ width: 100, height: 32 });

        if ('@ViewBag.Detail.Type' == '@Common.Constant.PmsConstant.TYPE_ISSUE_PROJECT') {
            $('.TaskVal').attr('hidden', true);
        } else if('@ViewBag.Detail.Type' == '@Common.Constant.PmsConstant.TYPE_ISSUE_TASK'){
            $('#dlgTaskNm').val('@ViewBag.Detail.TaskNm');
        }
        $('#dlgSelManager').on('click', function () {
            OpenIssueManagerDialog(function (res) {
            }, null, {
                ProjectOID: '@ViewBag.Detail.RootOID',
            }, '/Pms/dlgSelectIssueManager', '처리자 등록');
        });

        $('#IsApprovalRequired').on('change', function (e) {
            var checked = e.args.checked;
            
            if (checked) {
                ApprovRequired = "@Common.Constant.CommonConstant.ACTION_YES";
            } else {
                ApprovRequired = "@Common.Constant.CommonConstant.ACTION_NO";
            }
        });
    });

</script>