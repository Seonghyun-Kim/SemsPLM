
@{
    Layout = null;
}
<div class="searchBox">
    <div class="searchTitle">
        <label><i class="fas fa-folder-open"></i> &nbsp;일반 문서 검색</label>
    </div>
    <div class="searchContent">
        <div class="searchData">
            <div class="searchData">
                <div>문서번호</div>
                <div>
                    <input type="text" class="txtBox" id="dlgDocumentName" />
                </div>
            </div>
            <div class="searchData">
                <div>제목</div>
                <div>
                    <input type="text" class="txtBox" id="dlgDocumentTitle" />
                </div>
            </div>
        </div>
        <div class="searchButton">
            <button id="dlgDocumentSearchBtn" class="searchBtn custom-button" onclick=""><i class="fas fa-search"></i> 검색</button>
        </div>
    </div>
</div>
<div id="dlgDocumentGrid"></div>

<script>
    var selDocumentDialog;
    var TypeDocument = '@Common.Constant.DocumentConstant.TYPE_DOCUMENT';
    console.log(selDocumentDialog);
    var dlgDocumentSource =
    {
        dataType: "json",
        datafields: [
            { name: 'OID' },
            { name: 'DocType' },
            { name: 'DocType_KorNm' },
            { name: 'Name' },
            { name: 'BPolicy' },
            { name: 'BPolicyOID' },
            { name: 'Title', type:'string'},
            { name: 'Revision' },
            { name: 'Eo_No' },
            { name: 'CreateDt', type: 'date' },
            { name: 'CreateUs' },
            { name: 'CreateUsNm' },
            { name: 'Description' },
        ],
        hierarchy:
        {
            keyDataField: { name: 'OID' },
        },
        id: 'OID',
        addRow: function (rowID, rowData, IsUse, parentID, commit) {
            commit(true);
        },
    };

    var dlgDocumentGrid$ = $('#dlgDocumentGrid');
    dlgDocumentGrid$.jqxGrid({
        width: "100%",
        height: 590,
        theme: "kdnc",
        sortable: true,
        columns: [
            { text: '문서 분류', datafield: 'DocType_KorNm', width: "21%", align: 'center', cellsalign: 'center', },
            { text: '제목', datafield: 'Title', width: "30%", align: 'center', cellsalign: 'center', },

            { text: '문서번호', datafield: 'Name', width: "22%", align: 'center', cellsalign: 'center', },
            {
                text: '상태', datafield: 'BPolicy', width: "7%", align: 'center', cellsalign: 'center',
                cellsrenderer: function (row, column, value) {
                    return "<div style='width:100%;height:100%;text-align:center;vertical-align:middle;line-height:1.9;'>" + value.StatusNm + "</div>";
                },
            },
            { text: '작성자', datafield: 'CreateUsNm', width: "7%", align: 'center', cellsalign: 'center' },
            { text: '작성일', datafield: 'CreateDt', width: "13%", align: 'center', cellsalign: 'center', cellsFormat: 'yyyy-MM-dd', },
        ],
        editable: false,
        showToolbar: true,
        toolbarHeight: 45,
    });

    GetDocumentList();

    $('#dlgDocumentSearchBtn').on('click', function () {
        var param = {};
        param.Name = $('#dlgDocumentName').val();
        param.Title = $('#dlgDocumentTitle').val();
        param.Code = "@ViewBag.Code";
        param.IsLatest = 1;
        //param.IsReleasedLatest = 1;
        RequestData("/Document/SelDoc", param, function (res) {
            PrintJqxGrid(dlgDocumentSource, dlgDocumentGrid$, res);
        });
    });

    $('#dlgDocumentName, #dlgDocumentTitle').keydown(function (key) {
        if (key.keyCode == 13) {
            $('#dlgDocumentSearchBtn').trigger('click');
        }
    });

    function GetDocumentList() {
        var param = {};
        param.Name = $('#dlgDocClassName').val();
        param.Code = "@ViewBag.Code";
        param.IsLatest = 1;
        //param.IsReleasedLatest = 1;
        RequestData("/Document/SelDoc", param, function (res) {
            PrintJqxGrid(dlgDocumentSource, dlgDocumentGrid$, res);
        });
    }

</script>