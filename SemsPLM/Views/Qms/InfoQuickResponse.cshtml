@using Common.Constant;
@{
    Layout = null;
    string StoragePath = System.Configuration.ConfigurationManager.AppSettings["FileStorage"];
    string imgVaulePath = System.Configuration.ConfigurationManager.AppSettings["ImageValutPath"];
    string SavePath = QmsConstant.TYPE_QUICK_RESPONSE + "/" + ViewBag.QuickDetail.OID.ToString();

    string imgTempPath = System.Configuration.ConfigurationManager.AppSettings["ImageTempPath"];
    string TempPath = QmsConstant.TYPE_QUICK_RESPONSE;

    string FullImgPath = StoragePath + "/" + imgVaulePath + "/" + SavePath;

    string TempImgPath = StoragePath + "/" + imgTempPath + "/" + TempPath;
}
<style>
    .PictureInputImg {
        border: 1px solid #c5c5c5;
        position: absolute;
        width: 100%;
        top: 0;
        left: 0;
        text-align: center;
        vertical-align: middle;
        height: 169px;
    }

</style>

<input type="hidden" id="hidInfoQuickResponsePoorPicture_@ViewBag.QuickDetail.OID" value="@ViewBag.QuickDetail.PoorPicture" />
<input type="hidden" id="hidInfoQuickResponseGoodPicture_@ViewBag.QuickDetail.OID" value="@ViewBag.QuickDetail.GoodPicture" />
<div id="InfoQuickResponse_@ViewBag.QuickDetail.OID" class="info_project clearfix">
    <div class="info_menubar">
        <ul>
            <li class="tab info_focus" info="properties"><i class="fas fa-info-circle"></i> 기본 정보</li>
            <li class="tab" info="Apphis"><i class="fas fa-stream"></i> 결재이력</li>
            <li class="tab" info="Downhis"><i class="fas fa-users"></i> 다운로드 이력</li>
        </ul>
    </div>
    <div class="doc_content">
        <div class="project_basic clearfix">
            <div class="basic_info">
                <h3>신속대응</h3>
                <p>제 목 : <span>@ViewBag.QuickDetail.Title</span></p>
            </div>
            <div class="basic_image">
                <div class="image_inputbox">이미지<!--이미지 드래그 영역--></div>
                <div class="image_thumbnail"><!--이미지 썸네일 영역--></div>
            </div>
            <div class="basic_status">
                <div class="pointer_wrap">
                    @for (int i = 0; i < ViewBag.Status.Count; i++)
                    {
                        if (ViewBag.QuickDetail.BPolicyOID == ViewBag.Status[i].StatusOID)
                        {
                            <div class="pointer pointer_focus" data-type="@ViewBag.Status[i].Type" data-Status="@ViewBag.Status[i].StatusOID" style="z-index: @(ViewBag.Status.Count - i);">
                                <div class="project_status">@ViewBag.Status[i].StatusNm</div>
                            </div>
                        }
                        else
                        {
                            <div class="pointer" data-type="@ViewBag.Status[i].Type" data-Status="@ViewBag.Status[i].StatusOID" style="z-index: @(ViewBag.Status.Count - i);">
                                <div class="project_status">@ViewBag.Status[i].StatusNm</div>
                            </div>
                        }
                    }
                </div>
                <p>설명 : <span></span></p>
            </div>
        </div>
        <div style="overflow-y:scroll;height:668px;box-sizing:border-box;">
            <div id="properties" class="basic_grid">
                @if (ViewBag.QuickDetail.BPolicyNm == Common.Constant.QmsConstant.POLICY_QMS_QUICK_RESPONSE_PREPARE || ViewBag.QuickDetail.BPolicyNm == Common.Constant.QmsConstant.POLICY_QMS_MODULE_REJECTED && ViewBag.QuickDetail.CreateUs == Convert.ToInt32(Session["UserOID"]))
                {
                <table class="tableTopButtonBox" style="border-bottom:1px solid #c5c5c5;">
                    <tbody>
                        <tr>
                            <td style="text-align: right;" id="InfoQuickResponse_defaultBtn_@ViewBag.QuickDetail.OID">
                                <button id="InfoQuickResponse_EditBtn_@ViewBag.QuickDetail.OID" class="custom-button"><i class="fas fa-edit"></i> 수정</button>
                                @*<button id="InfoQuickResponse_AppDrwEditBtn_@ViewBag.QuickDetail.OID" class="custom-button"><i class="fas fa-highlighter"></i>문서 정정</button>*@
                                <button id="InfoQuickResponse_EditCancleBtn_@ViewBag.QuickDetail.OID" class="custom-button" style="display:none;"><i class="fas fa-times"></i> 취소</button>
                                <button id="InfoQuickResponse_SaveBtn_@ViewBag.QuickDetail.OID" class="custom-button" style="display:none;"><i class="fas fa-save"></i> 저장</button>
                            </td>
                        </tr>
                    </tbody>
                </table>

                }

                <label><i class="fas fa-caret-square-down"></i> 기본정보</label>
                <table class="infoTable" style="table-layout:fixed;">
                    <colgroup>
                        <col style="width:210px;" />
                        <col style="width:auto;" />
                        <col style="width:210px;" />
                        <col style="width:auto;" />
                        <col style="width:210px;" />
                        <col style="width:auto;" />
                    </colgroup>
                    <tbody>
                        <tr>
                            <th><label class="lbText">공장구분</label></th>
                            <td><div id="InfoQuickResponse_cbPlant_@ViewBag.QuickDetail.OID"></div></td>
                            <th><label class="lbText">발생유형</label></th>
                            <td><div id="InfoQuickResponse_cbOccurrence_@ViewBag.QuickDetail.OID"></div></td>
                            <th><label class="lbText">고객사</label></th>
                            <td><div id="InfoQuickResponse_cbOem_@ViewBag.QuickDetail.OID"></div></td>
                        </tr>
                        <tr>
                            <th><label class="lbText">품목</label></th>
                            <td>
                                <div id="InfoQuickResponse_cbDlgItem_@ViewBag.QuickDetail.OID"></div>
                            </td>
                            <th><label class="lbText">품번</label></th>
                            <td>
                                <div style="display:flex;">
                                    <input type="text" readonly="readonly" id="InfoQuickResponse_txtPartNo_@ViewBag.QuickDetail.OID" PartOID="@ViewBag.QuickDetail.PartOID" value="@ViewBag.QuickDetail.PartNo" style="width:180px; margin-right:5px;" />
                                    <button class="Modifiable_@ViewBag.QuickDetail.OID custom-button" AttrType="BUTTON" id="InfoQuickResponse_btnPartSearch_@ViewBag.QuickDetail.OID" style="display:none;"><i class="fas fa-search"></i> 검색</button>
                                </div>
                            </td>
                            <th><label class="lbText">품명</label></th>
                            <td>
                                <div style="display:flex;">
                                    <input type="text" readonly="readonly" id="InfoQuickResponse_txtPartNm_@ViewBag.QuickDetail.OID" value="@ViewBag.QuickDetail.PartNo" style="width:180px; margin-right:5px;" />
                                </div>
                            </td>
                        </tr>
                        <tr>
                            <th><label class="lbText">차종</label></th>
                            <td><input type="text" id="InfoQuickResponse_txtCarCode_@ViewBag.QuickDetail.OID" value="@ViewBag.QuickDetail.CarCode" style="width:120px; margin-right:5px;" /></td>
                            <th><label class="lbText">발생LOT</label></th>
                            <td><input type="text" readonly="readonly" id="InfoQuickResponse_txtLotNo_@ViewBag.QuickDetail.OID" value="@ViewBag.QuickDetail.LotNo" /></td>
                            <th><label class="lbText">불량수량</label></th>
                            <td><input type="text" readonly="readonly" id="InfoQuickResponse_txtPoorCnt_@ViewBag.QuickDetail.OID" value="@ViewBag.QuickDetail.PoorCnt" /></td>
                        </tr>
                        <tr>
                            <th><label class="lbText">작성일자</label></th>
                            <td><input type="text" readonly="readonly" id="InfoQuickResponse_txtWriteDt_@ViewBag.QuickDetail.OID" value="@(ViewBag.QuickDetail.OccurrenceDt == null ? "" : ViewBag.QuickDetail.WriteDt.ToString("yyyy-MM-dd"))" /></td>
                            <th><label class="lbText">품질담당자</label></th>
                            <td colspan="3">
                                <input type="text" readonly="readonly" id="InfoQuickResponse_txtWorkUserNm_@ViewBag.QuickDetail.OID" style="width:60%;" WorkUserOID="@ViewBag.QuickDetail.WorkUserOID" value="@ViewBag.QuickDetail.WorkUserNm" />
                                <button id="InfoQuickResponse_btnWorkUserSearch_@ViewBag.QuickDetail.OID" class="custom-button" style="display:none;"><i class="fas fa-search"></i> 검색</button>
                            </td>
                        </tr>
                    </tbody>
                </table>

                <label><i class="fas fa-caret-square-down"></i> 문제요약</label>
                <table class="infoTable" style="table-layout:fixed;">
                    <colgroup>
                        <col style="width:210px;" />
                        <col style="width:auto;" />
                        <col style="width:210px;" />
                        <col style="width:auto;" />
                        <col style="width:210px;" />
                        <col style="width:auto;" />
                    </colgroup>
                    <tbody>
                        <tr>
                            <th><label class="lbText">제목</label></th>
                            <td colspan="5">
                                <input type="text" class="Modifiable_@ViewBag.QuickDetail.OID" AttrType="TEXT" readonly="readonly" id="InfoQuickResponse_txtSummary_@ViewBag.QuickDetail.OID" style="width:98%;" value="@ViewBag.QuickDetail.Title" />
                            </td>
                        <tr>
                            <th><label class="lbText">발생처</label></th>
                            <td><div class="Modifiable_@ViewBag.QuickDetail.OID" AttrType="COMBO" id="InfoQuickResponse_cbOccurrenceArea_@ViewBag.QuickDetail.OID"></div></td>
                            <th><label class="lbText">발생장소</label></th>
                            <td><input class="Modifiable_@ViewBag.QuickDetail.OID" AttrType="TEXT" type="text" readonly="readonly" id="InfoQuickResponse_txtOccurrencePlace_@ViewBag.QuickDetail.OID" value="@ViewBag.QuickDetail.OccurrencePlace" /></td>
                            <th><label class="lbText">귀책구분</label></th>
                            <td>
                                <div class="Modifiable_@ViewBag.QuickDetail.OID" AttrType="COMBO" id="InfoQuickResponse_cbImpute_@ViewBag.QuickDetail.OID"></div>
                                <div class="Modifiable_@ViewBag.QuickDetail.OID" AttrType="COMBO" id="InfoQuickResponse_cbImputeDepartment_@ViewBag.QuickDetail.OID" style="display:none;"></div>
                                <div class="Modifiable_@ViewBag.QuickDetail.OID" AttrType="COMBO" id="InfoQuickResponse_cbImputePartners_@ViewBag.QuickDetail.OID" style="display:none;"></div>
                                @*<input type="text" readonly="readonly" id="InfoQuickResponse_txtImputeSupplier_@ViewBag.QuickDetail.OID" value="@ViewBag.QuickDetail.ImputeSupplierNm" style="display:none;" />*@
                            </td>
                            @*<th><label class="lbText">유발공정</label></th>
                    <td><div class="Modifiable_@ViewBag.QuickDetail.OID" AttrType="COMBO" id="InfoQuickResponse_cbInduce_@ViewBag.QuickDetail.OID"></div></td>*@
                        </tr>
                        <tr>
                            <th><label class="lbText">재발여부 </label></th>
                            <td> <div class="Modifiable_@ViewBag.QuickDetail.OID" AttrType="CHECKBOX" id="InfoQuickResponse_chkRecurrenceFl_@ViewBag.QuickDetail.OID">재발여부 선택</div></td>
                            <th><label class="lbText">발생일자</label></th>
                            <td><div class="Modifiable_@ViewBag.QuickDetail.OID" AttrType="DATE" id="InfoQuickResponse_txtOccurrenceDt_@ViewBag.QuickDetail.OID" value="@(ViewBag.QuickDetail.OccurrenceDt == null ? "" : ViewBag.QuickDetail.OccurrenceDt.ToString("yyyy-MM-dd"))"></div></td>
                            <th><label class="lbText">결함정도</label></th>
                            <td><div class="Modifiable_@ViewBag.QuickDetail.OID" AttrType="COMBO" id="InfoQuickResponse_cbDefectDegree_@ViewBag.QuickDetail.OID"></div></td>
                        </tr>
                        <tr>
                            <th><label class="lbText">불량내용상세</label></th>
                            <td colspan="3">
                                <textarea class="Modifiable_@ViewBag.QuickDetail.OID" AttrType="TEXTAREA" readonly="readonly" id="InfoQuickResponse_txtPoorDetail_@ViewBag.QuickDetail.OID" style="width:98%;">@ViewBag.QuickDetail.PoorDetail</textarea>
                            </td>
                            <th><label class="lbText">대책서회신요구일자</label></th>
                            <td><div class="Modifiable_@ViewBag.QuickDetail.OID" AttrType="DATE" id="InfoQuickResponse_txtMeasureResponseDt_@ViewBag.QuickDetail.OID" value="@(ViewBag.QuickDetail.MeasureResponseDt == null ? "" : ViewBag.QuickDetail.MeasureResponseDt.ToString("yyyy-MM-dd"))"></div></td>
                        </tr>
                        @*<tr>
                    <th><label class="lbText">QA</label></th>
                    <td colspan="5">
                        <textarea class="Modifiable_@ViewBag.QuickDetail.OID" AttrType="TEXTAREA" readonly="readonly" id="InfoQuickResponse_txtQa_@ViewBag.QuickDetail.OID" style="width:98%;">@ViewBag.QuickDetail.Qa</textarea>
                    </td>
                </tr>*@
                        <tr>
                            <th><label class="lbText">등록구분</label></th>
                            <td colspan="5"><div class="Modifiable_@ViewBag.QuickDetail.OID" AttrType="COMBO" id="InfoQuickResponse_cbEnrollmentType_@ViewBag.QuickDetail.OID"></div></td>
                            @*<th><label class="lbText">시정판정</label></th>
                    <td><div class="Modifiable_@ViewBag.QuickDetail.OID" AttrType="COMBO" id="InfoQuickResponse_cbCorrectDecision_@ViewBag.QuickDetail.OID"></div></td>*@
                        </tr>
                    </tbody>
                </table>

                <label><i class="fas fa-caret-square-down"></i> 고품사진/양품사진</label>
                <table class="infoTable" style="table-layout:fixed;">
                    <colgroup>
                        <col style="width:210px;" />
                        <col style="width:auto;" />
                        <col style="width:210px;" />
                        <col style="width:auto;" />
                        <col style="width:210px;" />
                        <col style="width:auto;" />
                    </colgroup>
                    <tbody>
                        <tr>
                            <th><label class="lbText">고품사진</label></th>
                            <td colspan="3">
                                <div style="width:200px; height:240px; position:relative; text-align:center;">
                                    <input type="file" multiple="true" id="InfoQuickResponse_imgPoorPicture_@ViewBag.QuickDetail.OID" style="display:none;">
                                    <div class="Modifiable_@ViewBag.QuickDetail.OID PictureInputImg" AttrType="IMGDROPZONE" style="z-index:100; display:none;" id="InfoQuickResponse_imgPoorZone_@ViewBag.QuickDetail.OID">
                                        <span id="InfoQuickResponse_imgPoorhere_@ViewBag.QuickDetail.OID"></span>
                                    </div>
                                    <div id="InfoQuickResponse_imgPoorResult_@ViewBag.QuickDetail.OID">
                                        @if (ViewBag.QuickDetail.OID != null && ViewBag.QuickDetail.PoorPicture != null)
                                        {
                                            <img class="img-thumbnail" style="width:200px;height:200px;" src="@(Url.Content(FullImgPath) + "/" + ViewBag.QuickDetail.PoorPicture)" />
                                        }
                                    </div>
                                    <button class="custom-button" id="InfoQuickResponse_btnPoorImgDownload_@ViewBag.QuickDetail.OID"> 다운로드</button>
                                </div>
                            </td>
                            <th><label class="lbText">양품사진</label></th>
                            <td colspan="5">
                                <div style="width:200px; height:240px; position:relative; text-align:center;">
                                    <input type="file" multiple="true" id="InfoQuickResponse_imgGoodPicture_@ViewBag.QuickDetail.OID" style="display:none;">
                                    <div class="Modifiable_@ViewBag.QuickDetail.OID PictureInputImg" AttrType="IMGDROPZONE" style="z-index:100; display:none;" id="InfoQuickResponse_imgGoodZone_@ViewBag.QuickDetail.OID">
                                        <span id="InfoQuickResponse_imgGoodhere_@ViewBag.QuickDetail.OID"></span>
                                    </div>
                                    <div id="InfoQuickResponse_imgGoodResult_@ViewBag.QuickDetail.OID">
                                        @if (ViewBag.QuickDetail.OID != null && ViewBag.QuickDetail.GoodPicture != null)
                                        {
                                            <img class="img-thumbnail" style="width:200px;height:200px;" src="@(Url.Content(FullImgPath) + "/" + ViewBag.QuickDetail.GoodPicture)" />
                                        }
                                    </div>
                                    <button class="custom-button" id="InfoQuickResponse_btnGoodImgDownload_@ViewBag.QuickDetail.OID"> 다운로드</button>
                                </div>
                            </td>
                        </tr>
                    </tbody>
                </table>

                <label><i class="fas fa-caret-square-down"></i> 일정계획담당자</label>
                <table class="infoTable" style="table-layout:fixed;">
                    <colgroup>
                        <col style="width:210px;" />
                        <col style="width:auto;" />
                        @*<col style="width:210px;" />
                <col style="width:auto;" />
                <col style="width:210px;" />
                <col style="width:auto;" />*@
                    </colgroup>
                    <tbody>
                        <tr>
                            @*<th><label class="lbText">봉쇄조치 범위선택 </label></th>
                    <td colspan="3">
                        <div style="display:flex;flex-direction:row;">
                            <div id="InfoQuickResponse_chkBlockadeMaterial_@ViewBag.QuickDetail.OID">원재료</div>
                            <div id="InfoQuickResponse_chkBlockadeOutProduct_@ViewBag.QuickDetail.OID">외주품</div>
                            <div id="InfoQuickResponse_chkBlockadeProcessProduct_@ViewBag.QuickDetail.OID">공정품</div>
                            <div id="InfoQuickResponse_chkBlockadeFinishProduct_@ViewBag.QuickDetail.OID">완성품</div>
                            <div id="InfoQuickResponse_chkBlockadeStorageProduct_@ViewBag.QuickDetail.OID">창고재고</div>
                            <div id="InfoQuickResponse_chkBlockadeShipProduct_@ViewBag.QuickDetail.OID">고객출하</div>
                        </div>

                    </td>*@
                            <th><label class="lbText">일정계획담당자</label></th>
                            <td>
                                <input type="text" readonly="readonly" id="InfoQuickResponse_txtPlanUserNm_@ViewBag.QuickDetail.OID" style="width:60%;" PlanUserOID="@ViewBag.QuickDetail.PlanUserOID" value="@ViewBag.QuickDetail.PlanUserNm" />
                                <button id="InfoQuickResponse_btnPlanUserSearch_@ViewBag.QuickDetail.OID" class="custom-button" style="display:none;"><i class="fas fa-search"></i> 검색</button>
                            </td>
                        </tr>
                    </tbody>
                </table>

                @*<label><i class="fas fa-caret-square-down"></i> 일정계획담당자</label>
        <table class="infoTable" style="table-layout:fixed;">
            <colgroup>
                <col style="width:210px;" />
                <col style="width:auto;" />
                <col style="width:210px;" />
                <col style="width:auto;" />
                <col style="width:210px;" />
                <col style="width:auto;" />
            </colgroup>
            <tbody>
                <tr>
                    <th><label class="lbText">일정계획담당자</label></th>
                    <td colspan="5">
                        <input type="text" readonly="readonly" id="InfoQuickResponse_txtPlanUserNm_@ViewBag.QuickDetail.OID" style="width:60%;" PlanUserOID="@ViewBag.QuickDetail.PlanUserOID" value="@ViewBag.QuickDetail.PlanUserNm" />
                        <button id="InfoQuickResponse_btnPlanUserSearch_@ViewBag.QuickDetail.OID" class="custom-button" style="display:none;"><i class="fas fa-search"></i> 검색</button>
                    </td>
                </tr>
            </tbody>
        </table>*@

                <label><i class="fas fa-caret-square-down"></i> 첨부파일</label>
                <div id="InfoQuickResponse_fileList_@ViewBag.QuickDetail.OID">

                </div>
            </div>
            <div id="Apphis" class="basic_grid dective">
                <div id="ApphisInfo_@ViewBag.QuickDetail.OID">
                </div>
            </div>
            <div id="Downhis" class="basic_grid dective">                
                @{Html.RenderAction("FileHistory", "Common", new { OID = ViewBag.QuickDetail.OID });}              
            </div>
        </div>
    </div>
</div>
<script type="text/javascript">
    var fileUpload = $("#InfoQuickResponse_fileList_@ViewBag.QuickDetail.OID").FileUpload({ OID: "@ViewBag.QuickDetail.OID", Type : "@QmsConstant.TYPE_QUICK_RESPONSE" });

    $(document).ready(function () {
        const QuickDetailOID = '@ViewBag.QuickDetail.OID';
        const QuickDetailDiv$ = $('#InfoQuickResponse_' + QuickDetailOID);

        $("#InfoQuickResponse_cbOem_@ViewBag.QuickDetail.OID").jqxComboBox({ selectedIndex: 0, source: WebUtils.ConvComboData(@(Html.Raw(Json.Encode(ViewBag.oemList))), "OID", "KorNm", true), displayMember: "text", valueMember: "value", width: 160, height: 30, disabled: true });
        $("#InfoQuickResponse_cbPlant_@ViewBag.QuickDetail.OID").jqxComboBox({ selectedIndex: 0, source: WebUtils.ConvComboData(@(Html.Raw(Json.Encode(ViewBag.factoryList))), "OID", "KorNm", true), displayMember: "text", valueMember: "value", width: 160, height: 30, disabled: true });
        $("#InfoQuickResponse_cbOccurrence_@ViewBag.QuickDetail.OID").jqxComboBox({ selectedIndex: 0, source: WebUtils.ConvComboData(@Html.Raw(Json.Encode(ViewBag.occurrenceList)), "OID", "KorNm", true), displayMember: "text", valueMember: "value", width: 160, height: 30, disabled: true });
        $("#InfoQuickResponse_cbOccurrenceArea_@ViewBag.QuickDetail.OID").jqxComboBox({ selectedIndex: 0, source: WebUtils.ConvComboData(@Html.Raw(Json.Encode(ViewBag.occurrenceAreaList)), "OID", "KorNm", true), displayMember: "text", valueMember: "value", width: 160, height: 30, disabled: true });
        @*$("#InfoQuickResponse_cbInduce_@ViewBag.QuickDetail.OID").jqxComboBox({ selectedIndex: 0, source: WebUtils.ConvComboData(@Html.Raw(Json.Encode(ViewBag.induceList)), "OID", "KorNm", true), displayMember: "text", valueMember: "value", width: 160, height: 30, disabled: true });*@
        $("#InfoQuickResponse_cbDefectDegree_@ViewBag.QuickDetail.OID").jqxComboBox({ selectedIndex: 0, source: WebUtils.ConvComboData(@Html.Raw(Json.Encode(ViewBag.defectDegreeList)), "OID", "KorNm", true), displayMember: "text", valueMember: "value", width: 160, height: 30, disabled: true });
        $("#InfoQuickResponse_cbImpute_@ViewBag.QuickDetail.OID").jqxComboBox({ selectedIndex: 0, source: WebUtils.ConvComboData(@Html.Raw(Json.Encode(ViewBag.imputeList)), "OID", "KorNm", true), displayMember: "text", valueMember: "value", width: 160, height: 30, disabled: true });
        @*$("#InfoQuickResponse_cbImputeDepartment_@ViewBag.QuickDetail.OID").jqxComboBox({ selectedIndex: 0, source: WebUtils.ConvComboData(@Html.Raw(Json.Encode(ViewBag.oemList)), "OID", "KorNm", true), displayMember: "text", valueMember: "value", width: 150, height: 25 });*@
        @*$("#InfoQuickResponse_cbCorrectDecision_@ViewBag.QuickDetail.OID").jqxComboBox({ selectedIndex: 0, source: WebUtils.ConvComboData(@Html.Raw(Json.Encode(ViewBag.correctDecisionList)), "OID", "KorNm", true), displayMember: "text", valueMember: "value", width: 160, height: 30, disabled: true });*@
        $("#InfoQuickResponse_cbEnrollmentType_@ViewBag.QuickDetail.OID").jqxComboBox({ selectedIndex: 0, source: WebUtils.ConvComboData(@Html.Raw(Json.Encode(ViewBag.EnrollmentTypeList)), "OID", "KorNm", true), displayMember: "text", valueMember: "value", width: 160, height: 30, disabled: true });
        $("#InfoQuickResponse_cbDlgItem_@ViewBag.QuickDetail.OID").jqxComboBox({ selectedIndex: 0, source: WebUtils.ConvComboData(@Html.Raw(Json.Encode(ViewBag.ItemList)), "OID", "KorNm", true), displayMember: "text", valueMember: "value", width: 250, height: 30, disabled: true });

        $("#InfoQuickResponse_cbImputeDepartment_@ViewBag.QuickDetail.OID").jqxComboBox({ selectedIndex: 0, source: WebUtils.ConvComboData(@Html.Raw(Json.Encode(ViewBag.imputeDeptList)), "OID", "KorNm", true), displayMember: "text", valueMember: "value", width: 160, height: 30, disabled: true  });
        $("#InfoQuickResponse_cbImputePartners_@ViewBag.QuickDetail.OID").jqxComboBox({ selectedIndex: 0, source: WebUtils.ConvComboData(@Html.Raw(Json.Encode(ViewBag.partnersList)), "OID", "KorNm", true), displayMember: "text", valueMember: "value", width: 160, height: 30, disabled: true  });


         $("#InfoQuickResponse_cbOem_@ViewBag.QuickDetail.OID").jqxComboBox('val', "@ViewBag.QuickDetail.OemLibOID");
         $("#InfoQuickResponse_cbPlant_@ViewBag.QuickDetail.OID").jqxComboBox('val', "@ViewBag.QuickDetail.PlantLibOID");
         $("#InfoQuickResponse_cbOccurrence_@ViewBag.QuickDetail.OID").jqxComboBox('val', "@ViewBag.QuickDetail.OccurrenceLibOID");
         $("#InfoQuickResponse_cbOccurrenceArea_@ViewBag.QuickDetail.OID").jqxComboBox('val', "@ViewBag.QuickDetail.OccurrenceAreaLibOID");
         @*$("#InfoQuickResponse_cbInduce_@ViewBag.QuickDetail.OID").jqxComboBox('val', "@ViewBag.QuickDetail.InduceLibOID");*@
         $("#InfoQuickResponse_cbDefectDegree_@ViewBag.QuickDetail.OID").jqxComboBox('val', "@ViewBag.QuickDetail.DefectDegreeLibOID");
         $("#InfoQuickResponse_cbImpute_@ViewBag.QuickDetail.OID").jqxComboBox('val', "@ViewBag.QuickDetail.ImputeLibOID");
         @*$("#InfoQuickResponse_cbCorrectDecision_@ViewBag.QuickDetail.OID").jqxComboBox('val', "@ViewBag.QuickDetail.CorrectDecisionLibOID");*@
        $("#InfoQuickResponse_cbEnrollmentType_@ViewBag.QuickDetail.OID").jqxComboBox('val', "@ViewBag.QuickDetail.EnrollmentLibOID");
        $("#InfoQuickResponse_cbDlgItem_@ViewBag.QuickDetail.OID").jqxComboBox('val', "@ViewBag.QuickDetail.ItemLibOID");
        $("#InfoQuickResponse_cbImputeDepartment_@ViewBag.QuickDetail.OID").jqxComboBox('val', "@ViewBag.QuickDetail.ImputeDepartmentOID");
        $("#InfoQuickResponse_cbImputePartners_@ViewBag.QuickDetail.OID").jqxComboBox('val', "@ViewBag.QuickDetail.ImputeSupplierOID");

        // 발생유형에 따라 발생처 변경
        $("#InfoQuickResponse_cbOccurrence_@ViewBag.QuickDetail.OID").on('select', function (event) {
            var args = event.args;

            var name = args.item.label === "사외" ? "OCCURRENCE_AREA_OUT" : args.item.label === "사내" ? "OCCURRENCE_AREA_INSIDE" : null;
            if (!WebUtils.isEmpty(name)) {
                RequestData("/Manage/SelLibraryObject", { Name: name }, function (res1) {
                    var OID = res1.OID;

                    RequestData("/Manage/SelLibrary", { FromOID: OID, IsUse: "Y" }, function (res2) {
                        $("#InfoQuickResponse_cbOccurrenceArea_@ViewBag.QuickDetail.OID").jqxComboBox({ source: WebUtils.ConvComboData(res2, "OID", "KorNm", true) })
                    });
                });
            } else {
                $("#InfoQuickResponse_cbOccurrenceArea_@ViewBag.QuickDetail.OID").jqxComboBox("clearSelection");
                $("#InfoQuickResponse_cbOccurrenceArea_@ViewBag.QuickDetail.OID").jqxComboBox({ source: {} })
            }
        });

        var item = $("#InfoQuickResponse_cbImpute_@ViewBag.QuickDetail.OID").jqxComboBox('getItemByValue', "@ViewBag.QuickDetail.ImputeLibOID");

        if (item.label === "자체") {
            $("#InfoQuickResponse_cbImputeDepartment_@ViewBag.QuickDetail.OID").css("display", "block");
        } else if (item.label === "협력사") {
            $("#InfoQuickResponse_cbImputePartners_@ViewBag.QuickDetail.OID").css("display", "block");
        }

        $("#InfoQuickResponse_cbImpute_@ViewBag.QuickDetail.OID").on('select', function (event) {
            var args = event.args;
            if (args.item.label === "자체") {
                $("#InfoQuickResponse_cbImputeDepartment_@ViewBag.QuickDetail.OID").css("display", "block");
                $("#InfoQuickResponse_cbImputePartners_@ViewBag.QuickDetail.OID").css("display", "none");
                $("#InfoQuickResponse_cbImputePartners_@ViewBag.QuickDetail.OID").jqxComboBox("clearSelection");
            } else if (args.item.label === "협력사") {
                $("#InfoQuickResponse_cbImputeDepartment_@ViewBag.QuickDetail.OID").css("display", "none");
                $("#InfoQuickResponse_cbImputePartners_@ViewBag.QuickDetail.OID").css("display", "block");
                $("#InfoQuickResponse_cbImputeDepartment_@ViewBag.QuickDetail.OID").jqxComboBox("clearSelection");
            } else {
                $("#InfoQuickResponse_cbImputeDepartment_@ViewBag.QuickDetail.OID").css("display", "none");
                $("#InfoQuickResponse_cbImputePartners_@ViewBag.QuickDetail.OID").css("display", "none");
                $("#InfoQuickResponse_cbImputeDepartment_@ViewBag.QuickDetail.OID").jqxComboBox("clearSelection");
                $("#InfoQuickResponse_cbImputePartners_@ViewBag.QuickDetail.OID").jqxComboBox("clearSelection");
            }
        });

        $("#InfoQuickResponse_txtWriteDt_@ViewBag.QuickDetail.OID").jqxDateTimeInput(DateFormat);
        $("#InfoQuickResponse_txtWriteDt_@ViewBag.QuickDetail.OID").jqxDateTimeInput({
            width: 160,
            height: 30,
            theme: "Light",
            disabled: true
        });

        $("#InfoQuickResponse_txtOccurrenceDt_@ViewBag.QuickDetail.OID").jqxDateTimeInput(DateFormat);
        $("#InfoQuickResponse_txtOccurrenceDt_@ViewBag.QuickDetail.OID").jqxDateTimeInput({
            width: 160,
            height: 30,
            theme: "Light",
            disabled: true
        });

        $("#InfoQuickResponse_txtMeasureResponseDt_@ViewBag.QuickDetail.OID").jqxDateTimeInput(DateFormat);
        $("#InfoQuickResponse_txtMeasureResponseDt_@ViewBag.QuickDetail.OID").jqxDateTimeInput({
            width: 160,
            height: 30,
            theme: "Light",
            disabled: true
        });

        $("#InfoQuickResponse_chkRecurrenceFl_@ViewBag.QuickDetail.OID").jqxCheckBox({ width: 130, checked: ("@ViewBag.QuickDetail.RecurrenceFl" == "True" ? true : false), disabled: true });
        @*$("#InfoQuickResponse_chkBlockadeMaterial_@ViewBag.QuickDetail.OID").jqxCheckBox({ width: 130, checked: ("@ViewBag.QuickDetail.BlockadeMaterialFl" == "True"? true : false), disabled: true });
        $("#InfoQuickResponse_chkBlockadeOutProduct_@ViewBag.QuickDetail.OID").jqxCheckBox({ width: 130, checked: ("@ViewBag.QuickDetail.BlockadeOutProductFl" == "True"? true : false), disabled: true });
        $("#InfoQuickResponse_chkBlockadeProcessProduct_@ViewBag.QuickDetail.OID").jqxCheckBox({ width: 130, checked: ("@ViewBag.QuickDetail.BlockadeProcessProductFl" == "True"? true : false), disabled: true });
        $("#InfoQuickResponse_chkBlockadeFinishProduct_@ViewBag.QuickDetail.OID").jqxCheckBox({ width: 130, checked: ("@ViewBag.QuickDetail.BlockadeFinishProductFl" == "True"? true : false), disabled: true });
        $("#InfoQuickResponse_chkBlockadeStorageProduct_@ViewBag.QuickDetail.OID").jqxCheckBox({ width: 130, checked: ("@ViewBag.QuickDetail.BlockadeStorageProductFl" == "True"? true : false) , disabled: true});
        $("#InfoQuickResponse_chkBlockadeShipProduct_@ViewBag.QuickDetail.OID").jqxCheckBox({ width: 130, checked: ("@ViewBag.QuickDetail.BlockadeShipProductFl" == "True"? true : false), disabled: true });*@

        // 고품사진, 양품사진
        if ($('.showImg').children().length == 1) {
            $('#InfoQuickResponse_imgPoorhere_@ViewBag.QuickDetail.OID').hide();
            $('#InfoQuickResponse_imgGoodhere_@ViewBag.QuickDetail.OID').hide();
        }

        $("#InfoQuickResponse_imgPoorPicture_@ViewBag.QuickDetail.OID").simpleUpload({
            url: '/Qms/ImgUploadFile',
            params: {},
            method: 'post',
            maxFileNum: 1,
            maxFileSize: 1000000,
            allowedMimeType: ['image/jpeg', 'image/png', 'image/gif'],
            dropZone: '#InfoQuickResponse_imgPoorZone_@(ViewBag.QuickDetail.OID != null ? ViewBag.QuickDetail.OID : "")',
        }).on('upload:over', function (e, files) {
            alert('Number of files is over');
        }).on('upload:invalid', function (e, files) {
            for (var i = 0; i < files.length; i++) {
                alert('Invalid ' + files[i].reason + ': ' + files[i].name);
            }
        }).on('upload:done', function (e, file, index, data, xhr) {
            var imgPictureResult$ = $('#InfoQuickResponse_imgPoorResult_@ViewBag.QuickDetail.OID');
            imgPictureResult$.empty();
            imgPictureResult$.append('<img class="img-thumbnail" src="@(Url.Content(TempImgPath) + "/")' + data +'" />');
            $('#hidInfoQuickResponsePoorPicture_@ViewBag.QuickDetail.OID').val(data);
            $('#InfoQuickResponse_imgPoorhere_@ViewBag.QuickDetail.OID').hide();
            $('.img-thumbnail').next().on('click', function () {
                $(this).parent('li').remove();
            });
        });

        // 고품사진 다운로드
        var btnPoorImgDownload$ = $("#InfoQuickResponse_btnPoorImgDownload_@ViewBag.QuickDetail.OID").jqxButton();
        btnPoorImgDownload$.on("click", function () {
            // popup 중앙에 띄우기
            var mtWidth = window.outerWidth;
            var mtHeight = window.outerHeight;

            var scX = window.screenLeft;
            var scY = window.screenTop;

            var popX = scX + (mtWidth - 1) / 2 - 50;
            var popY = scY + (mtHeight - 1) / 2 - 90;
            var win = "toolbar=0, menubar=0, scrollbars=0, resizable=1, left=" + popX + ", top=" + popY + ", width=1, height=1";
            var url = "/Qms/ImgFileDownload?OID=" + @ViewBag.QuickDetail.OID + "&FileName=" + $('#hidInfoQuickResponsePoorPicture_@ViewBag.QuickDetail.OID').val();

            window.location.href = url;
        });

        $("#InfoQuickResponse_imgGoodPicture_@ViewBag.QuickDetail.OID").simpleUpload({
            url: '/Qms/ImgUploadFile',
            params: {},
            method: 'post',
            maxFileNum: 1,
            maxFileSize: 1000000,
            allowedMimeType: ['image/jpeg', 'image/png', 'image/gif'],
            dropZone: '#InfoQuickResponse_imgGoodZone_@(ViewBag.QuickDetail.OID != null ? ViewBag.QuickDetail.OID : "")',
        }).on('upload:over', function (e, files) {
            alert('Number of files is over');
        }).on('upload:invalid', function (e, files) {
            for (var i = 0; i < files.length; i++) {
                alert('Invalid ' + files[i].reason + ': ' + files[i].name);
            }
        }).on('upload:done', function (e, file, index, data, xhr) {
            var imgPictureResult$ = $('#InfoQuickResponse_imgGoodResult_@ViewBag.QuickDetail.OID');
            imgPictureResult$.empty();
            imgPictureResult$.append('<img class="img-thumbnail" src="@(Url.Content(TempImgPath) + "/")' + data +'" />');
            $('#hidInfoQuickResponseGoodPicture_@ViewBag.QuickDetail.OID').val(data);
            $('#InfoQuickResponse_imgGoodhere_@ViewBag.QuickDetail.OID').hide();
            $('.img-thumbnail').next().on('click', function () {
                $(this).parent('li').remove();
            });
        });

        // 양품사진 다운로드
        var btnGoodImgDownload$ = $("#InfoQuickResponse_btnGoodImgDownload_@ViewBag.QuickDetail.OID").jqxButton();
        btnGoodImgDownload$.on("click", function () {
            // popup 중앙에 띄우기
            var mtWidth = window.outerWidth;
            var mtHeight = window.outerHeight;

            var scX = window.screenLeft;
            var scY = window.screenTop;

            var popX = scX + (mtWidth - 1) / 2 - 50;
            var popY = scY + (mtHeight - 1) / 2 - 90;
            var win = "toolbar=0, menubar=0, scrollbars=0, resizable=1, left=" + popX + ", top=" + popY + ", width=1, height=1";
            var url = "/Qms/ImgFileDownload?OID=" + @ViewBag.QuickDetail.OID + "&FileName=" + $('#hidInfoQuickResponseGoodPicture_@ViewBag.QuickDetail.OID').val();

            window.location.href = url;
        });

        // 제품 검색
        var btnDlgPartSearch$ = $("#InfoQuickResponse_btnPartSearch_@ViewBag.QuickDetail.OID").jqxButton();
        btnDlgPartSearch$.on("click", function () {
            OpenSearchEPartDataDialog(function (res) {
                $("#InfoQuickResponse_txtPartNo_@ViewBag.QuickDetail.OID").val(res.Name);
                $("#InfoQuickResponse_txtPartNm_@ViewBag.QuickDetail.OID").val(res.Title);
                $("#InfoQuickResponse_txtPartNo_@ViewBag.QuickDetail.OID").attr("PartOID", res.OID);
            }, null, null, '/EBom/dlgSearchEPartAssy', 'EPART 검색');
        });

        var btnDlgPlanUserSearch$ = $("#InfoQuickResponse_btnPlanUserSearch_@ViewBag.QuickDetail.OID").jqxButton({disabled: true});
        btnDlgPlanUserSearch$.on("click", function () {
            OpenApprovalPersonDialog(function (res) {
                if (res.length > 1) {
                    alert("담당자는 한명만 지정 할 수 있습니다.");
                    return;
                }

                $("#InfoQuickResponse_txtPlanUserNm_@ViewBag.QuickDetail.OID").val(res[0].Name);
                $("#InfoQuickResponse_txtPlanUserNm_@ViewBag.QuickDetail.OID").attr("PlanUserOID", res[0].OID);

            }, null, null, '/Common/ApprovalPerson', '사용자 검색');
        });

        var btnDlgWorkerUserSearch$ = $("#InfoQuickResponse_btnWorkUserSearch_@ViewBag.QuickDetail.OID").jqxButton();
        btnDlgWorkerUserSearch$.on("click", function () {
            OpenApprovalPersonDialog(function (res) {
                if (res.length > 1) {
                    alert("담당자는 한명만 지정 할 수 있습니다.");
                    return;
                }

                $("#InfoQuickResponse_txtWorkUserNm_@ViewBag.QuickDetail.OID").val(res[0].Name);
                $("#InfoQuickResponse_txtWorkUserNm_@ViewBag.QuickDetail.OID").attr("WorkUserOID", res[0].OID);

            }, null, null, '/Common/ApprovalPerson', '사용자 검색');
        });

        $('#InfoQuickResponse_' + QuickDetailOID + ' .tab').on('click', function () {
            const self$ = $(this);
            const infoValue = self$.attr('info');
            //control side menu
            QuickDetailDiv$.find('[class="tab info_focus"]').removeClass('info_focus');
            self$.addClass('info_focus');
            QuickDetailDiv$.find('[class="basic_grid"]').addClass('dective');
            QuickDetailDiv$.find('[id="' + infoValue + '"]').removeClass('dective');

            if (infoValue == 'properties') {

            } else if (infoValue == 'Apphis') {
                RequestHtml('/Common/ApprovalHistory', { OID: QuickDetailOID }, function (res) {
                    $('#ApphisInfo_' + QuickDetailOID).html(res);
                });
            }else if (infoValue == 'fileHistory') {
            }
        });

        $('#InfoQuickResponse_EditBtn_' + QuickDetailOID).on('click', function () {
            var ModifyAttr = $('.Modifiable_' + QuickDetailOID);

            ModifyAttr.each(function (i, v) {
                ContentEditMode(v);
            });

            //수정 가능한 항목을 표시
            var modifyTag = document.createElement('div');
            modifyTag.className = "modifyTag";

            $('.Modifiable_' + QuickDetailOID).parent().css('position', 'relative');

            $('.Modifiable_' + QuickDetailOID).parent().append(modifyTag);

            $("#InfoQuickResponse_EditBtn_" + QuickDetailOID).css("display", "none");
            $("#InfoQuickResponse_SaveBtn_" + QuickDetailOID).css("display", "inline-block");
            $("#InfoQuickResponse_EditCancleBtn_" + QuickDetailOID).css("display", "inline-block");
            $("#InfoQuickResponse_imgPoorZone_" + QuickDetailOID).css("display", "inline-block");
            $("#InfoQuickResponse_imgGoodZone_" + QuickDetailOID).css("display", "inline-block");
            $("#InfoQuickResponse_btnPoorImgDownload_" + QuickDetailOID).css("display", "none");
            $("#InfoQuickResponse_btnGoodImgDownload_" + QuickDetailOID).css("display", "none");
            fileUpload.EditMode();
        });

        $("#InfoQuickResponse_EditCancleBtn_" + QuickDetailOID).jqxButton();
        $("#InfoQuickResponse_EditCancleBtn_" + QuickDetailOID).on("click", function () {
            var ModifyAttr = $('.Modifiable_' + QuickDetailOID);

            ModifyAttr.each(function (i, v) {
                ContentReadMode(v);
            });

            $(".modifyTag").remove();
            $("#InfoQuickResponse_EditBtn_" + QuickDetailOID).css("display", "inline-block");
            $("#InfoQuickResponse_SaveBtn_" + QuickDetailOID).css("display", "none");
            $("#InfoQuickResponse_EditCancleBtn_" + QuickDetailOID).css("display", "none");
            $("#InfoQuickResponse_imgPoorZone_" + QuickDetailOID).css("display", "none");
            $("#InfoQuickResponse_imgGoodZone_" + QuickDetailOID).css("display", "none");
            $("#InfoQuickResponse_btnPoorImgDownload_" + QuickDetailOID).css("display", "inline-block");
            $("#InfoQuickResponse_btnGoodImgDownload_" + QuickDetailOID).css("display", "inline-block");

            // 저장 안하고 취소 시 이전 고품사진 보여주도록 설정
            @if (ViewBag.QuickDetail.PoorPicture != null)
            {
                <text>
                var imgPictureResult$ = $('#InfoQuickResponse_imgResult_@ViewBag.QuickDetail.OID');
                imgPictureResult$.empty();
                imgPictureResult$.append('<img class="img-thumbnail" src="@(Url.Content(FullImgPath) + "/" + ViewBag.QuickDetail.PoorPicture)" />');
                $('#InfoQuickResponse_imghere_@ViewBag.QuickDetail.OID').hide();
                $('.img-thumbnail').next().on('click', function () {
                    $(this).parent('li').remove();
                });
                </text>
            }

            fileUpload.ReadOnlyMode();
        });


        $("#InfoQuickResponse_SaveBtn_" + QuickDetailOID).jqxButton();
        $('#InfoQuickResponse_SaveBtn_' + QuickDetailOID).on("click", function () {
            var param = {};

            param.OID = "@ViewBag.QuickDetail.OID";
            @*param.PlantLibOID = WebUtils.GetComboValue("InfoQuickResponse_cbPlant_@ViewBag.QuickDetail.OID");
            param.OccurrenceLibOID =WebUtils.GetComboValue("InfoQuickResponse_cbOccurrence_@ViewBag.QuickDetail.OID");*@
            //param.PartOID = 156;
            //param.LotNo = "ABC";
            @*param.OemLibOID = WebUtils.GetComboValue("InfoQuickResponse_cbOem_@ViewBag.QuickDetail.OID");
            param.WorkUserOID = $("#txtWorkUserNm").attr("WorkUserOID");
            param.WriteDt = $("#InfoQuickResponse_txtWriteDt_@ViewBag.QuickDetail.OID").val();*@
            param.PoorCnt = $("#InfoQuickResponse_txtPoorCnt_@ViewBag.QuickDetail.OID").val();
            param.Title = $("#InfoQuickResponse_txtSummary_@ViewBag.QuickDetail.OID").val();
            param.Summary = $("#InfoQuickResponse_txtSummary_@ViewBag.QuickDetail.OID").val();
            param.OccurrenceAreaLibOID = WebUtils.GetComboValue("InfoQuickResponse_cbOccurrenceArea_@ViewBag.QuickDetail.OID");
            @*param.InduceLibOID = WebUtils.GetComboValue("InfoQuickResponse_cbInduce_@ViewBag.QuickDetail.OID");*@
            param.DefectDegreeLibOID = WebUtils.GetComboValue("InfoQuickResponse_cbDefectDegree_@ViewBag.QuickDetail.OID");
            param.ImputeLibOID = WebUtils.GetComboValue("InfoQuickResponse_cbImpute_@ViewBag.QuickDetail.OID");

            var item = $("#InfoQuickResponse_cbImpute_@ViewBag.QuickDetail.OID").jqxComboBox('getItemByValue', param.ImputeLibOID);

            if (item.label === "자체") {
                param.ImputeDepartmentOID = WebUtils.GetComboValue("InfoQuickResponse_cbImputeDepartment_@ViewBag.QuickDetail.OID");
            } else if (item.label === "협력사") {
                param.ImputeSupplierOID = WebUtils.GetComboValue("InfoQuickResponse_cbImputePartners_@ViewBag.QuickDetail.OID");
            }

            param.PartOID = $("#InfoQuickResponse_txtPartNo_@ViewBag.QuickDetail.OID").attr("PartOID");
            //param.Summary = $("#txtDlgSummary").val();
            param.PoorDetail = $("#InfoQuickResponse_txtPoorDetail_@ViewBag.QuickDetail.OID").val();
            param.RecurrenceFl = WebUtils.GetCheckBoxValue("InfoQuickResponse_chkRecurrenceFl_@ViewBag.QuickDetail.OID");
            param.OccurrencePlace = $("#InfoQuickResponse_txtOccurrencePlace_@ViewBag.QuickDetail.OID").val();
            param.OccurrenceDt = $("#InfoQuickResponse_txtOccurrenceDt_@ViewBag.QuickDetail.OID").val();
            @*param.CorrectDecisionLibOID = WebUtils.GetComboValue("InfoQuickResponse_cbCorrectDecision_@ViewBag.QuickDetail.OID");*@
            param.MeasureResponseDt = $("#InfoQuickResponse_txtMeasureResponseDt_@ViewBag.QuickDetail.OID").val();
            @*param.Qa = $("#InfoQuickResponse_txtQa_@ViewBag.QuickDetail.OID").val();*@
            @*param.BlockadeMaterialFl = WebUtils.GetCheckBoxValue("InfoQuickResponse_chkBlockadeMaterial_@ViewBag.QuickDetail.OID");
            param.BlockadeOutProductFl = WebUtils.GetCheckBoxValue("InfoQuickResponse_chkBlockadeOutProduct_@ViewBag.QuickDetail.OID");
            param.BlockadeProcessProductFl = WebUtils.GetCheckBoxValue("InfoQuickResponse_chkBlockadeProcessProduct_@ViewBag.QuickDetail.OID");
            param.BlockadeFinishProductFl = WebUtils.GetCheckBoxValue("InfoQuickResponse_chkBlockadeFinishProduct_@ViewBag.QuickDetail.OID");
            param.BlockadeStorageProductFl = WebUtils.GetCheckBoxValue("InfoQuickResponse_chkBlockadeStorageProduct_@ViewBag.QuickDetail.OID");
            param.BlockadeShipProductFl = WebUtils.GetCheckBoxValue("InfoQuickResponse_chkBlockadeShipProduct_@ViewBag.QuickDetail.OID");*@
            param.PlanUserOID = $("#InfoQuickResponse_txtPlanUserNm_@ViewBag.QuickDetail.OID").attr("PlanUserOID");
            param.PoorPicture = $('#hidInfoQuickResponsePoorPicture_@ViewBag.QuickDetail.OID').val();
            param.GoodPicture = $('#hidInfoQuickResponseGoodPicture_@ViewBag.QuickDetail.OID').val();
            param.EnrollmentLibOID = WebUtils.GetComboValue("InfoQuickResponse_cbEnrollmentType_@ViewBag.QuickDetail.OID");

            if (WebUtils.isEmpty(param.PartOID)) {
                alert("품번을 선택 해주세요.");
                return;
            }

            if (WebUtils.isEmpty(param.Title)) {
                alert("제목을 입력 해주세요.");
                return;
            }

            if (WebUtils.isEmpty(param.EnrollmentLibOID)) {
                alert("등록구분을 선택 해주세요.");
                return;
            }

            if (WebUtils.isEmpty(param.OccurrenceAreaLibOID)) {
                alert("발생처를 선택 해주세요.");
                return;
            }

            if (WebUtils.isEmpty(param.OccurrencePlace)) {
                alert("발생장소를 입력 해주세요.");
                return;
            }

            if (WebUtils.isEmpty(param.ImputeLibOID)) {
                alert("귀책구분을 선택 해주세요.");
                return;
            }

            if (item.label === "자체") {
                if (WebUtils.isEmpty(param.ImputeDepartmentOID)) {
                    alert("부서를 선택 해주세요.");
                    return;
                }
            } else if (item.label === "협력사") {
                if (WebUtils.isEmpty(param.ImputeSupplierOID)) {
                    alert("협력사를 선택 해주세요.");
                    return;
                }
            }

            @*if (item.label === "협력사" && WebUtils.isEmpty(param.ImputeSupplierOID)) {
                alert("협력사를 선택 해주세요.");
                return;
            } else if (WebUtils.isEmpty(param.ImputeDepartmentOID)) {
                alert("부서를 선택 해주세요.");
                return;
            }*@

            if (WebUtils.isEmpty(param.OccurrenceDt)) {
                alert("발생일자를 선택 해주세요.");
                return;
            }

            if (WebUtils.isEmpty(param.DefectDegreeLibOID)) {
                alert("결함정도를 선택 해주세요.");
                return;
            }

            if (WebUtils.isEmpty(param.PoorDetail)) {
                alert("불량내용상세을 입력 해주세요.");
                return;
            }

            if (WebUtils.isEmpty(param.PoorPicture)) {
                alert("고품사진을 등록 해주세요.");
                return;
            }

            if (WebUtils.isEmpty(param.GoodPicture)) {
                alert("양품사진을 등록 해주세요.");
                return;
            }
            @*if (WebUtils.isEmpty(param.PlanUserOID)) {
                alert("일정계획담당자을 선택 해주세요.");
                return;
            }*@

            var Files = fileUpload.Files();

            var removeFiles = fileUpload.RemoveFiles();
            if (!WebUtils.isEmpty(removeFiles)) {
                param.delFiles = [];
                param.delFiles = removeFiles;
            }

            SendDataWithFile("/Qms/UdtQuickResponse", param, Files, function (response) {
                if (response.isError) {
                    alert(response.resultMessage);
                    return;
                }
                alert("저장되었습니다.");
                PageReload();
            });
        });
    })

</script>
